class Game{constructor(){this.choice=[{value:"rock",beats:["scissors","lizard"]},{value:"paper",beats:["rock","spock"]},{value:"scissors",beats:["paper","lizard"]},{value:"lizard",beats:["paper","spock"]},{value:"spock",beats:["rock","scissors"]}],this.language="hu",this.playerNames=["player","computer"],this.dictionary={en:{rock:"rock",paper:"paper",scissors:"scissors",lizard:"lizard",spock:"Spock",paperT:"paper",scissorsT:"scissors",lizardT:"lizard",spockT:"Spock",gameRules:"Game rules",rulesDesc:'Use the arrows to set your threw,<br />then click to "check" to start the game!',beats:"beats",and:"and",popupInstruction:"Click the popup to close it!",youThrew:"You threw",CPUThrew:"CPU threw",popupClosing:"Closing popup...",popupClosingIn:"Closing in",popupTimeout:"seconds",resultTie:"It's a tie!",resultPlayerWon:"You won!",resultComputerWon:"Computer wins!",computerName:"Computer",playerName:"Player",threws:"Threws",wins:"wins",error:"Error! You must select a valid option!"},de:{rock:"Stein",paper:"Papier",scissors:"Schere",lizard:"Echse",spock:"Spock",gameRules:"Spielregeln",paperT:"Papier",scissorsT:"Schere",lizardT:"Echse",spockT:"Spock",gameRules:"Spielregeln",rulesDesc:'Benutze die Pfeile, um deinen Wurf einzustellen, <br /> dann klicke auf "Häkchen", um das Spiel zu starten!',beats:"schlägt",and:"und",popupInstruction:"Klick auf das Popup-Fenster, um zu schließen!",youThrew:"Du hast geworfen",CPUThrew:"Der Computer hat geworfen",popupClosing:"Das Popup wird geschlossen!",popupClosingIn:"Schließt in",popupTimeout:"Sekunden",resultTie:"Unentschieden!",resultPlayerWon:"Du hast gewonnen!",resultComputerWon:"Der Computer hat gewonnen!",computerName:"Komputer",playerName:"Spieler",threws:"geworfen",wins:"Gewinnt",error:"Fehler! Du musst eine gültige Option auswählen!"},hu:{rock:"kő",paper:"papír",scissors:"olló",lizard:"gyík",spock:"Spock",rockT:"követ",paperT:"papírt",scissorsT:"ollót",lizardT:"gyíkot",spockT:"Spockot",gameRules:"Játékszabályok",rulesDesc:'A nyilakkal a válaszd ki amit mutatni akarsz,<br />majd kattintson a "pipa" gombra a játék indításához!',beats:"üti",and:"és",popupInstruction:"Kattints a felugró ablakra a bezáráshoz!",youThrew:"Te mutattál",CPUThrew:"A CPU mutatott",popupClosing:"A felugró ablak bezárása...",popupClosingIn:"Bezáródik",popupTimeout:"másodperc múlva",resultTie:"Döntetlen!",resultPlayerWon:"Nyertél!",resultComputerWon:"A CPU nyert!",computerName:"Számítógép",playerName:"Játékos",threws:"Mutatott",wins:"Nyert",error:"Hiba! Érvénytelen választás!"}},this.statistics={},this.userChoiceIndex=Math.floor(Math.random()*this.choice.length),this.userChoice=this.choice[this.userChoiceIndex],this.computerChoiceIndex=Math.floor(Math.random()*this.choice.length),this.computerChoice=this.choice[this.computerChoiceIndex],this.computerRollLength=15,this.computerWinsCount=+localStorage.getItem("computerWinsCount")||0,this.userWinsCount=+localStorage.getItem("userWinsCount")||0,this.popupTimeout=3,this.getDomELements(),this.initialize()}getDomELements(){this.app=document.getElementById("app"),this.startButton=document.querySelector(".start"),this.nextButton=document.querySelector(".next"),this.prevButton=document.querySelector(".prev"),this.rulesButton=document.querySelector(".rules"),this.statButton=document.querySelector(".statistics"),this.langButton=document.querySelector(".language"),this.langChange=Array.from(document.querySelectorAll(".language-button")),this.licensingButton=document.querySelector(".licensing"),this.statisticsButton=document.querySelector(".statistics"),this.playerName=document.querySelector("#player-name"),this.computerName=document.querySelector("#computer-name"),this.mainTitle=document.querySelector("#main-title"),this.computerWins=document.querySelector(".computer-wins"),this.userWins=document.querySelector(".user-wins"),this.rulesModal=document.querySelector(".rules.modal"),this.resultModal=document.querySelector(".result.modal"),this.languageModal=document.querySelector(".language.modal"),this.statisticsModal=document.querySelector(".statistics.modal"),this.licensingModal=document.querySelector(".licensing.modal"),this.statisticsModal=document.querySelector(".statistics.modal"),this.playerImages=Array.from(document.querySelectorAll(".images.player")),this.computerImages=Array.from(document.querySelectorAll(".images.computer"))}setScores(){this.computerWins.innerHTML=this.computerWinsCount,this.userWins.innerHTML=this.userWinsCount,localStorage.setItem("computerWinsCount",this.computerWinsCount),localStorage.setItem("userWinsCount",this.userWinsCount)}initializeButton(){this.nextButton.addEventListener("click",e=>{e.preventDefault(),this.userChoiceIndex++,this.userChoiceIndex>this.choice.length-1&&(this.userChoiceIndex=0),this.userChoice=this.choice[this.userChoiceIndex],this.setUserChoiceImage()}),this.prevButton.addEventListener("click",e=>{e.preventDefault(),this.userChoiceIndex--,this.userChoiceIndex<0&&(this.userChoiceIndex=this.choice.length-1),this.userChoice=this.choice[this.userChoiceIndex],this.setUserChoiceImage()}),this.startButton.addEventListener("click",()=>{for(let i=0;i<this.computerRollLength;i++)setTimeout(()=>{this.computerChoiceIndex=Math.floor(Math.random()*this.choice.length),this.computerChoice=this.choice[this.computerChoiceIndex],this.setComputerChoiceImage(),0===i&&(this.determineWinner(),this.showResult())},10*(this.computerRollLength+1-i)*(this.computerRollLength+1-i))});const modalMaps=[{activator:[this.rulesButton,this.rulesModal],modal:this.rulesModal},{activator:[this.langButton,this.languageModal],modal:this.languageModal},{activator:[this.licensingButton,this.licensingModal],modal:this.licensingModal},{activator:[this.statisticsButton,this.statisticsModal],modal:this.statisticsModal},{activator:this.resultModal,modal:this.resultModal}];modalMaps.forEach(modalMap=>{this.initModal(modalMap.activator,modalMap.modal)}),this.langChange.forEach(lc=>{lc.addEventListener("click",e=>{this.language=lc.dataset.lang,this.updateLang()})})}makeArray(arr){return Array.isArray(arr)?arr:[arr]}initModal(activator,modal){this.makeArray(activator).forEach(elem=>{elem.addEventListener("click",()=>{modal.classList.toggle("show")})})}setUserChoiceImage(){this.setHidden(this.playerImages,this.userChoice)}setComputerChoiceImage(){this.setHidden(this.computerImages,this.computerChoice)}setHidden(images,choiced){images.forEach(img=>img.classList.add("hidden")),images.filter(img=>img.id===choiced.value)[0].classList.remove("hidden")}getUserChoice(userInputStr){const userChoiceObj=this.getChoice(userInputStr);this.userChoice=this.choice.map(item=>item.name===userChoiceObj.name).reduce((acc,curr)=>acc+ +curr)>0?userChoiceObj:alert(this.dictionary[this.language].error)}getComputerChoice(){this.computerChoice=this.choice[Math.floor(Math.random()*this.choice.length)]}determineWinner(){let playerWins=null;this.result=this.getTranslation("resultTie"),this.userChoice.beats.includes(this.computerChoice.value)&&(playerWins=!0,this.result=this.getTranslation("resultPlayerWon"),this.userWinsCount++),this.computerChoice.beats.includes(this.userChoice.value)&&(playerWins=!1,this.result=this.getTranslation("resultComputerWon"),this.computerWinsCount++),this.setScores(),this.calculateStatistics(playerWins)}calculateStatistics(playerWins){let winner,looser;!0===playerWins&&(winner=this.userChoice.value,looser=this.computerChoice.value,this.statistics.player[winner]=this.statistics.player[winner]+1),!1===playerWins&&(winner=this.computerChoice.value,looser=this.userChoice.value,this.statistics.computer[winner]=this.statistics.computer[winner]+1),this.updateStatistics(),this.createStatistics()}createStatistics(){const header=["wins",...this.playerNames.map(pn=>pn+"Name")],table=`<table><thead>\n      <tr>${header.map((col,index)=>`<th>${this.getTranslation(col)}</th>`).join("")}</tr>\n      </thead><tbody>\n      ${Object.keys(this.statistics.player).map(threw=>`\n            <tr>\n              <td class="player-cell">${this.getTranslation(threw)}</td>\n              <td class="player-cell" style="text-align:center">${this.statistics.player[threw]}</td>\n              <td class="computer-cell" style="text-align:center">${this.statistics.computer[threw]}</td>\n            </tr>`).join("")}\n      </tbody></table>`;this.statisticsModal.innerHTML=table}getTranslation(string){return this.dictionary[this.language][string]}getChoice(userChoice){return this.choice[Object.keys(this.choice).filter(c=>this.choice[c].value===userChoice.toLowerCase())[0]]}generateRules(){this.rules=`\n    <h2>${this.getTranslation("gameRules")}:</h2>\n    <p>${this.getTranslation("rulesDesc")}</p>\n    ${this.choice.map(c=>`<p>${this.getTranslation(c.value)} ${this.getTranslation("beats")} ${c.beats.map(b=>this.getTranslation(b+"T")).join(` ${this.getTranslation("and")} `)}.</p>`).join("")}\n    <p style="color: red">${this.getTranslation("popupInstruction")}</p>`,this.rulesModal.querySelector(".rules-text").innerHTML=this.rules}showResult(){this.resultModal.innerHTML=`\n    <h2>${this.result}</h2>\n    <p>${this.getTranslation("youThrew")} ${this.getTranslation(this.userChoice.value+"T")}</p>\n    <p>${this.getTranslation("CPUThrew")} ${this.getTranslation(this.computerChoice.value+"T")}</p>`;const counter=document.createElement("p");this.resultModal.appendChild(counter),counter.classList.add("counter"),this.resultModal.classList.add("show");for(let i=this.popupTimeout;i>=0;i--)setTimeout(()=>{0===i?(counter.innerHTML=this.getTranslation("popupClosing"),this.resultModal.classList.remove("show")):counter.innerHTML=`${this.getTranslation("popupClosingIn")} <span style="width:1.2rem;display:inline-block;">${i}</span> ${this.getTranslation("popupTimeout")}...`},3e3*(this.popupTimeout-i))}getTitle(){return this.choice.map(threw=>this.getTranslation(threw.value)).join(", ")}updateLang(){this.generateRules(),this.createStatistics(),this.playerName.innerHTML=this.getTranslation("playerName"),this.computerName.innerHTML=this.getTranslation("computerName"),this.mainTitle.innerHTML=this.getTitle(),document.documentElement.setAttribute("lang",this.language)}initializeStatistics(){const oldStat=localStorage.getItem("statistics");oldStat?this.statistics=JSON.parse(oldStat):this.playerNames.forEach(player=>{this.statistics[player]={},this.choice.forEach(item=>{this.statistics[player][item.value]=0})})}updateStatistics(){localStorage.setItem("statistics",JSON.stringify(this.statistics))}initialize(){this.initializeStatistics(),this.initializeButton(),this.setUserChoiceImage(),this.setComputerChoiceImage(),this.updateLang(),this.setScores()}}const game=new Game;
//# sourceMappingURL=app.min.js.map